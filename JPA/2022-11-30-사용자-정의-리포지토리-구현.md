> 실무에서 굉장히 자주 이용하는 방법이다

<br>

### 사용자 정의 리포지토리
---

스프링 데이터 JPA 리포지토리는 인터페이스만 정의하고 구현체는 스프링이 자동 완성해준다.
- 문제는 구현해야하는 기능이 너무 많다는 것

- 아래와 같은 이유로 만약에 직접 구현해야 한다면?
  - JPA 직접 사용
  - 스프링 JDBC Template 사용
  - MyBatis 사용
  - 데이터베이스 커넥션 직접 사용
  - Querydsl 사용

<br>

### 어떻게 하지?
---
1. 먼저 내가 직접 구현하고 싶은 내용을 인터페이스로 작성한다.
2. 해당 인터페이스를 구현하는 구현 클래스를 생성한다.
3. 해당 인터페이스를 기존 JpaRepository를 상속 받는 인터페이스가 상속 받는다. 
4. 이렇게 하면 사용자 정의 리포지토리를 사용할 수 있다.
- 구현 클래스는 꼭 XXXRepository + Impl로 네이밍을 해줘야 한다. 
- 그래야 spring data jpa가 구현 클래스를 찾아서 실행해 줄 수 있다.
- Impl 싫은데... 라고 한다면 JavaConfig로 설정이 가능하다.
  - 근데 왠만하면 관례를 따르자

<br>

### 왜 쓰지?
---
- 굉장히 복잡한 쿼리나 직접 DB와 상호작용 해야하거나 할 때 사용한다.
- QueryDsl을 쓸 때 사용한다.

<br>

### 참고
---
항상 사용자 정의 리포지토리가 필요한 것은 아니다. 그냥 임의의 리포지토리를 만들어도 된다. 예를들어 그냥 MyAwesomeRepository라는 클래스를 만들고 빈으로 등록해서 써도 된다. 물로 이 경우 JPA와 완전히 별개로 동작한다.

<br>

```김영한님```: 나는 비즈니스 리포지토리 로직과 화면에 맞춘 리포지토리 로직은 분리하는 편이다. 로직의 라이프사이클이 다르기 때문에 길게 봤을 때 분리하는 것이 유지 보수성에 더 좋다.

즉 너무 비대한 리포지토리(클래스)를 만드는 것에 대하여 고민해 볼 필요가 있다는 말이다. 